<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ö–∏–Ω–æ–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ ¬´–ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π –≤ –∫–∏–Ω–æ¬ª - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ —Å–æ–≤–µ—Ç—Å–∫–æ–º –∫–∏–Ω–æ –∏ –∑–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö —Å—ä–µ–º–æ–∫ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ">
    <meta name="keywords" content="–∫–∏–Ω–æ, –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞, –õ–µ–Ω—Ñ–∏–ª—å–º, –ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π —Ä–∞–π–æ–Ω, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, —Å–æ–≤–µ—Ç—Å–∫–æ–µ –∫–∏–Ω–æ">
    <meta name="author" content="–§–æ–Ω–¥ —Ä–∞–∑–≤–∏—Ç–∏—è –∫—É–ª—å—Ç—É—Ä—ã ¬´–≠—Ñ–µ—Å¬ª">
    <meta property="og:title" content="–ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π –≤ –∫–∏–Ω–æ - –ö–∏–Ω–æ–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞">
    <meta property="og:description" content="–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ —Å–æ–≤–µ—Ç—Å–∫–æ–º –∫–∏–Ω–æ –∏ –∑–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö —Å—ä–µ–º–æ–∫ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://krasnakarta.ru/quiz">
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.googleapis.com" crossorigin>
    <title>–ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∏–π –≤ –∫–∏–Ω–æ - –ö–∏–Ω–æ–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
    <link rel="preload" href="Pilotka.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="Christopher.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="Montserrat-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="Montserrat-Bold.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" as="image" href="img/logo-festival.webp" type="image/webp">
    <link rel="preload" as="image" href="img/logo-partner-1.webp" type="image/webp">
    <link rel="preload" as="image" href="img/logo-partner-2.webp" type="image/webp">
    <link rel="preload" as="image" href="img/logo-partner-3.webp" type="image/webp">
    <link rel="preload" as="image" href="img/logo-partner-4.webp" type="image/webp">
    <link rel="preload" as="image" href="img/logo-partner-5.webp" type="image/webp">
    <link rel="stylesheet" href="styles.min.css">
    <link rel="canonical" href="https://krasnakarta.ru/quiz">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#4ba4cb">
</head>
<body>
<footer class="logos">
    <div class="logos-inner">
        <div class="logo-main">
            <img src="img/logo-festival.webp" alt="–õ–æ–≥–æ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è –ö–∞–∫ –ø—Ä–æ–π—Ç–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É" fetchpriority="high" loading="eager" decoding="async">
        </div>
        <div class="logo-partners">
            <img src="img/logo-partner-1.webp" alt="–õ–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ 1" loading="eager" decoding="async">
            <img src="img/logo-partner-2.webp" alt="–õ–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ 2" loading="eager" decoding="async">
            <img src="img/logo-partner-3.webp" alt="–õ–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ 3" loading="eager" decoding="async">
            <img src="img/logo-partner-4.webp" alt="–õ–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ 4" loading="eager" decoding="async">
            <img src="img/logo-partner-5.webp" alt="–õ–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ 5" loading="eager" decoding="async">
        </div>
    </div>
 </footer>

<div id="welcome-screen" class="welcome-screen">
    <div class="welcome-content">
        <h1>–ö–†–ê–°–ù–û–ì–í–ê–†–î–ï–ô–°–ö–ò–ô –í –ö–ò–ù–û</h1>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ —Å–æ–≤–µ—Ç—Å–∫–æ–º –∫–∏–Ω–æ –∏ –∑–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö —Å—ä–µ–º–æ–∫ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ!</p>
        <img src="img/start.webp" alt="–ó–∞—Å—Ç–∞–≤–∫–∞ –∫–≤–∏–∑–∞" loading="lazy" decoding="async" width="1100" height="619" sizes="(max-width: 768px) 100vw, (max-width: 1024px) 90vw, 1100px">
        <button id="start-quiz-btn" class="action-btn">–ù–∞—á–∞—Ç—å –∫–≤–∏–∑</button>
    </div>
</div>


<div id="quiz-container" class="quiz-container">
    <div class="quiz-header">
        <h1>–ö–†–ê–°–ù–û–ì–í–ê–†–î–ï–ô–°–ö–ò–ô –í –ö–ò–ù–û</h1>
        <p>–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –æ —Å–æ–≤–µ—Ç—Å–∫–æ–º –∫–∏–Ω–æ –∏ –∑–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞—Ö —Å—ä–µ–º–æ–∫!</p>
        <div id="progress" class="progress">–í–æ–ø—Ä–æ—Å <span id="progress-current">1</span>/<span id="progress-total">11</span></div>
    </div>

    <div id="quiz-body">
        <div class="quiz-step active" data-question="1" data-type="image" data-answer="guzeyeva.webp" 
             data-explanation="–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –õ–∞—Ä–∏—Å–∞ –ì—É–∑–µ–µ–≤–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–Ω—è–ª–∞—Å—å –≤ —ç—Ç–æ–º —Ñ–∏–ª—å–º–µ –≤ 1985 –≥–æ–¥—É, –∫–æ–≥–¥–∞ –µ–π –±—ã–ª–æ 26 –ª–µ—Ç."
             data-explanation-wrong="–ù–µ —Å–æ–≤—Å–µ–º. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - –õ–∞—Ä–∏—Å–∞ –ì—É–∑–µ–µ–≤–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–Ω—è–ª–∞—Å—å –≤ —ç—Ç–æ–º —Ñ–∏–ª—å–º–µ –≤ 1985 –≥–æ–¥—É –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ 26 –ª–µ—Ç.">
            <div class="question-title">–û–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö —Ç–∞–ª–∞–Ω—Ç–æ–≤ —Å–Ω—è–ª—Å—è –≤ —Ñ–∏–ª—å–º–µ ¬´–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –º–µ—Ç—Ä–æ¬ª 1985 –≥–æ–¥–∞ –≤ –≤–æ–∑—Ä–∞—Å—Ç–µ 26 –ª–µ—Ç. –ö—Ç–æ —ç—Ç–æ?</div>
            <div class="image-options">
                <img src="img/guzeyeva.webp" alt="–ê–∫—Ç—Ä–∏—Å–∞ 1" data-value="guzeyeva.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ì—É–∑–µ–µ–≤–∞';">
                <img src="img/boyarskiy.webp" alt="–ê–∫—Ç–µ—Ä 2" data-value="boyarskiy.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ë–æ—è—Ä—Å–∫–∏–π';">
                <img src="img/nagiyev.webp" alt="–ê–∫—Ç–µ—Ä 3" data-value="nagiyev.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ù–∞–≥–∏–µ–≤';">
                <img src="img/gordeyev.webp" alt="–ê–∫—Ç–µ—Ä 4" data-value="gordeyev.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ì–æ—Ä–¥–µ–µ–≤';">
            </div>
            <div class="feedback"></div>
        </div>
        
        <div class="quiz-step" data-question="2" data-type="radio" data-answer="–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –º–µ—Ç—Ä–æ" 
             data-explanation="–í–µ—Ä–Ω–æ! –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: —Ñ–∏–ª—å–º —Å–Ω–∏–º–∞–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ–º —Å—Ç–∞–Ω—Ü–∏–π ¬´–õ–∞–¥–æ–∂—Å–∫–∞—è¬ª –∏ ¬´–ù–æ–≤–æ—á–µ—Ä–∫–∞—Å—Å–∫–∞—è¬ª."
             data-explanation-wrong="–ù–µ–≤–µ—Ä–Ω–æ. –≠—Ç–æ—Ç —Ñ–∏–ª—å–º –æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—è—Ö –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –º–µ—Ç—Ä–æ¬ª. –ï–≥–æ —Å–Ω–∏–º–∞–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ–º —Å—Ç–∞–Ω—Ü–∏–π!">
             <div class="question-title">–ö–∞–∫–æ–π —Å–æ–≤–µ—Ç—Å–∫–∏–π —Ñ–∏–ª—å–º 1985 –≥–æ–¥–∞ –æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—è—Ö –ª–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ —Å–Ω–∏–º–∞–ª—Å—è –Ω–∞ –ú–∞–ª–æ–π –û—Ö—Ç–µ?</div>
             <div class="answers">
                 <div class="answer"><input type="radio" name="q2" id="q2a1" value="–ß—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏–µ"><label for="q2a1">¬´–ß—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏–µ¬ª</label></div>
                 <div class="answer"><input type="radio" name="q2" id="q2a2" value="–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –º–µ—Ç—Ä–æ"><label for="q2a2">¬´–í—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ –º–µ—Ç—Ä–æ¬ª</label></div>
                 <div class="answer"><input type="radio" name="q2" id="q2a3" value="–ö–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ü–∏–∏ –†–µ–∑–∏–¥–µ–Ω—Ç"><label for="q2a3">¬´–ö–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ü–∏–∏ "–†–µ–∑–∏–¥–µ–Ω—Ç"¬ª</label></div>
                 <div class="answer"><input type="radio" name="q2" id="q2a4" value="–õ–∏—á–Ω–∞—è –∂–∏–∑–Ω—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞"><label for="q2a4">¬´–õ–∏—á–Ω–∞—è –∂–∏–∑–Ω—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞¬ª</label></div>
             </div>
             <div class="feedback"></div>
        </div>

        <div class="quiz-step" data-question="3" data-type="match-metro" data-answer='{"spb":"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥","msk":"–ú–æ—Å–∫–≤–∞","kazan":"–ö–∞–∑–∞–Ω—å","ekb":"–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥","minsk":"–ú–∏–Ω—Å–∫"}' 
             data-explanation="–û—Ç–ª–∏—á–Ω–æ! –í—ã —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–æ–≤."
             data-explanation-wrong="–ï—Å—Ç—å –æ—à–∏–±–∫–∏, –Ω–æ –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä—ã –±—ã–ª–∏ –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã –∑–µ–ª–µ–Ω—ã–º. –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ –±–æ–ª—å—à–µ!">
            <div class="question-title">–§–∏–ª—å–º ¬´–ü—Ä–æ—Ä—ã–≤¬ª (1986) –ø–æ–≤–µ—Å—Ç–≤—É–µ—Ç –æ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è—Ö —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –º–µ—Ç—Ä–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—ã –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞ —Å –≥–æ—Ä–æ–¥–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è.</div>
            <div class="match-container">
                <div class="match-item">
                    <img src="img/metro_spb.webp" alt="–ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ 1" loading="lazy" decoding="async" width="400" height="300" onerror="this.onerror=null;this.src='https://placehold.co/400x300/eee/333?text=–ö–∞—Ä—Ç–∞+1';">
                    <select class="match-select" data-map="spb"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option></select>
                </div>
                <div class="match-item">
                    <img src="img/metro_msk.webp" alt="–ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ 2" loading="lazy" decoding="async" width="400" height="300" onerror="this.onerror=null;this.src='https://placehold.co/400x300/eee/333?text=–ö–∞—Ä—Ç–∞+2';">
                    <select class="match-select" data-map="msk"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option></select>
                </div>
                <div class="match-item">
                    <img src="img/metro_kazan.webp" alt="–ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ 3" loading="lazy" decoding="async" width="400" height="300" onerror="this.onerror=null;this.src='https://placehold.co/400x300/eee/333?text=–ö–∞—Ä—Ç–∞+3';">
                    <select class="match-select" data-map="kazan"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option></select>
                </div>
                <div class="match-item">
                    <img src="img/metro_ekb.webp" alt="–ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ 4" loading="lazy" decoding="async" width="400" height="300" onerror="this.onerror=null;this.src='https://placehold.co/400x300/eee/333?text=–ö–∞—Ä—Ç–∞+4';">
                    <select class="match-select" data-map="ekb"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option></select>
                </div>
                <div class="match-item">
                    <img src="img/metro_minsk.webp" alt="–ö–∞—Ä—Ç–∞ –º–µ—Ç—Ä–æ 5" loading="lazy" decoding="async" width="400" height="300" onerror="this.onerror=null;this.src='https://placehold.co/400x300/eee/333?text=–ö–∞—Ä—Ç–∞+5';">
                    <select class="match-select" data-map="minsk"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option></select>
                </div>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="quiz-step" data-question="4" data-type="text" data-answer="–ó–∏–º–Ω—è—è –≤–∏—à–Ω—è" 
             data-explanation="–¢–æ—á–Ω–æ! –≠—Ç–æ –∑–Ω–∞–º–µ–Ω–∏—Ç–∞—è —Ç—Ä–∏–ª–æ–≥–∏—è ¬´–ó–∏–º–Ω—è—è –≤–∏—à–Ω—è¬ª, –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–π —Å–Ω–∏–º–∞–ª–∞—Å—å –≤ –ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–æ–º —Ä–∞–π–æ–Ω–µ."
             data-explanation-wrong="–ü–æ—á—Ç–∏! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - ¬´–ó–∏–º–Ω—è—è –≤–∏—à–Ω—è¬ª.">
            <div class="question-title">–°–∫—Ä–µ—Å—Ç–∏–≤ —ç—Ç–∏ –¥–≤–∞ –æ–±—Ä–∞–∑–∞, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –º–µ–ª–æ–¥—Ä–∞–º—ã-—Ç—Ä–∏–ª–æ–≥–∏–∏. –ß—Ç–æ —ç—Ç–æ –∑–∞ —Ñ–∏–ª—å–º?</div>
            <div class="image-rebus">
                <img src="img/winter.webp" alt="–ó–∏–º–∞" loading="lazy" decoding="async" width="200" height="200" onerror="this.onerror=null;this.src='https://placehold.co/200x200/aae/fff?text=–ó–∏–º–∞';">
                <span>+</span>
                <img src="img/cherry.webp" alt="–í–∏—à–Ω—è" loading="lazy" decoding="async" width="200" height="200" onerror="this.onerror=null;this.src='https://placehold.co/200x200/f8b/fff?text=–í–∏—à–Ω—è';">
            </div>
            <input type="text" class="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
            <div class="feedback"></div>
        </div>
        
        <div class="quiz-step" data-question="5" data-type="radio" data-answer="–ì >400 –º–æ—Å—Ç–æ–≤" 
             data-explanation="–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –í –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ –±–æ–ª–µ–µ 400 –º–æ—Å—Ç–æ–≤, –∞ –µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –∏ –Ω–µ–±–æ–ª—å—à–∏–µ –º–æ—Å—Ç—ã –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è—Ö –ø—Ä–æ–º–∑–æ–Ω, –∏—Ö —á–∏—Å–ª–æ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ 800."
             data-explanation-wrong="–ù–µ —É–≥–∞–¥–∞–ª–∏. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ –±–æ–ª–µ–µ 400 –º–æ—Å—Ç–æ–≤! –ê —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π - –æ–∫–æ–ª–æ 800.">
             <div class="question-title">–í —Ñ–∏–ª—å–º–µ ¬´–ú–∞–º–∞ –≤—ã—à–ª–∞ –∑–∞–º—É–∂¬ª (1969) –µ—Å—Ç—å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–π –≤–∏–¥ –Ω–∞ –º–æ—Å—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ù–µ–≤—Å–∫–æ–≥–æ. –ê –∫–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, —Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –º–æ—Å—Ç–æ–≤ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ?</div>
             <div class="answers">
                 <div class="answer"><input type="radio" name="q5" id="q5a1" value="–ê < 100 –º–æ—Å—Ç–æ–≤"><label for="q5a1">–ê &lt; 100 –º–æ—Å—Ç–æ–≤</label></div>
                 <div class="answer"><input type="radio" name="q5" id="q5a2" value="–ë 100-200 –º–æ—Å—Ç–æ–≤"><label for="q5a2">–ë 100-200 –º–æ—Å—Ç–æ–≤</label></div>
                 <div class="answer"><input type="radio" name="q5" id="q5a3" value="–í 200-350 –º–æ—Å—Ç–æ–≤"><label for="q5a3">–í 200-350 –º–æ—Å—Ç–æ–≤</label></div>
                 <div class="answer"><input type="radio" name="q5" id="q5a4" value="–ì >400 –º–æ—Å—Ç–æ–≤"><label for="q5a4">–ì &gt; 400 –º–æ—Å—Ç–æ–≤</label></div>
             </div>
             <div class="feedback"></div>
        </div>

        <div class="quiz-step" data-question="6" data-type="text" data-answer="–ê–Ω–¥—Ä–µ–π–∫–∞" 
             data-explanation="–í–µ—Ä–Ω–æ! –≠—Ç–æ —Ñ–∏–ª—å–º ¬´–ê–Ω–¥—Ä–µ–π–∫–∞¬ª 1958 –≥–æ–¥–∞."
             data-explanation-wrong="–ù–µ–≤–µ—Ä–Ω–æ. –§–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–∑ –ø–µ—Å–Ω–∏ –≥—Ä—É–ø–ø—ã ¬´–ñ—É–∫–∏¬ª - ¬´–ê–Ω–¥—Ä–µ–π–∫–∞¬ª (1958 –≥.).">
             <div class="question-title">–í—Å–ø–æ–º–∏–Ω–∞—è –ø–µ—Å–Ω—é –≥—Ä—É–ø–ø—ã ¬´–ñ—É–∫–∏¬ª ¬´–ë–∞—Ç–∞—Ä–µ–π–∫–∞¬ª, –≤ —Ç—Ä–µ—Ç—å–µ–º –∫—É–ø–ª–µ—Ç–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –∏–º—è –≥–µ—Ä–æ—è. –¢–∞–∫–æ–µ –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —Ñ–∏–ª—å–º–∞ –≤—ã–±—Ä–∞–ª –ù–∏–∫–æ–ª–∞–π –õ–µ–±–µ–¥–µ–≤ –≤ 1958 –≥–æ–¥—É. –û –∫–∞–∫–æ–º —Ñ–∏–ª—å–º–µ –∏–¥—ë—Ç —Ä–µ—á—å?</div>
             <input type="text" class="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
             <div class="feedback"></div>
        </div>

        <div class="quiz-step" data-question="7" data-type="text" data-answer="–ù–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –ö–∞—Ä–∏–∫–∞ –∏ –í–∞–ª–∏" 
             data-explanation="–ò–º–µ–Ω–Ω–æ —Ç–∞–∫! –≠—Ç–æ—Ç –¥–µ—Ç—Å–∫–∏–π —Ñ–∏–ª—å–º –ø–æ –∫–Ω–∏–≥–µ –Ø–Ω–∞ –õ–∞—Ä—Ä–∏ —Å–Ω–∏–º–∞–ª–∏ –Ω–∞ –ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–æ–º –ø—Ä–æ—Å–ø–µ–∫—Ç–µ."
             data-explanation-wrong="–ë–ª–∏–∑–∫–æ, –Ω–æ –Ω–µ—Ç. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ - ¬´–ù–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –ö–∞—Ä–∏–∫–∞ –∏ –í–∞–ª–∏¬ª.">
            <div class="question-title">–ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç —Å—Ç–∞–ª –º–µ—Å—Ç–æ–º —Å—ä—ë–º–∫–∏ —Ñ–∏–ª—å–º–∞ –ø–æ –∫–Ω–∏–≥–µ –Ø–Ω–∞ –õ–∞—Ä—Ä–∏. –í—Å–ø–æ–º–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ —Ñ–∏–ª—å–º–∞, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥—Å–∫–∞–∑–∫–∏.</div>
            <div class="image-rebus">
                <img src="img/dragonfly.webp" alt="–°—Ç—Ä–µ–∫–æ–∑–∞" loading="lazy" decoding="async" width="200" height="200" onerror="this.onerror=null;this.src='https://placehold.co/200x200/8c9/fff?text=–°—Ç—Ä–µ–∫–æ–∑–∞';">
                <img src="img/potion.webp" alt="–ó–µ–ª—å–µ" loading="lazy" decoding="async" width="200" height="200" onerror="this.onerror=null;this.src='https://placehold.co/200x200/c8e/fff?text=–ó–µ–ª—å–µ';">
                <img src="img/kids.webp" alt="–î–µ—Ç–∏" loading="lazy" decoding="async" width="200" height="200" onerror="this.onerror=null;this.src='https://placehold.co/200x200/f9d/fff?text=–î–µ—Ç–∏';">
            </div>
            <input type="text" class="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
            <div class="feedback"></div>
        </div>
        
        <div class="quiz-step" data-question="8" data-type="match-quotes" data-answer='{"q1":"–º–æ–ª–æ–¥—ã–º","q2":"—Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ","q3":"—Ä–æ–¥–Ω—ã–µ –ª—é–¥–∏","q4":"–æ–Ω–∞ –Ω–µ —Ç–∞–∫–∞—è —É–∂ –ø—Ä–æ—Å—Ç–∞—è"}' 
             data-explanation="–û—Ç–ª–∏—á–Ω–∞—è –ø–∞–º—è—Ç—å! –≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ü–∏—Ç–∞—Ç—ã –∏–∑ –ª—é–±–∏–º–æ–≥–æ –º–Ω–æ–≥–∏–º–∏ —Ñ–∏–ª—å–º–∞ ¬´–°—Ç–∞—Ä—à–∏–π —Å—ã–Ω¬ª."
             data-explanation-wrong="–ù–µ –≤—Å–µ —Ü–∏—Ç–∞—Ç—ã —Å–æ—à–ª–∏—Å—å. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã –∑–µ–ª–µ–Ω—ã–º. –≠—Ç–æ –∫–ª–∞—Å—Å–∏–∫–∞ –∏–∑ —Ñ–∏–ª—å–º–∞ ¬´–°—Ç–∞—Ä—à–∏–π —Å—ã–Ω¬ª.">
             <div class="question-title">–§–∏–ª—å–º ¬´–°—Ç–∞—Ä—à–∏–π —Å—ã–Ω¬ª (1975) —Ä–∞–∑–æ—à—ë–ª—Å—è –Ω–∞ —Ü–∏—Ç–∞—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Å–ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∏–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ —Ñ—Ä–∞–∑.</div>
             <div class="quotes-container">
                <div class="quote-item">
                    <div class="quote-start">–¢—ã –¥—É–º–∞–µ—à—å, —è —Ç–µ–±—è –Ω–µ –ø–æ–Ω–∏–º–∞—é? –Ø –≤–µ–¥—å —Ç–æ–∂–µ –±—ã–ª...</div>
                    <select class="match-select" data-quote="q1"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...</option></select>
                </div>
                <div class="quote-item">
                    <div class="quote-start">–ñ–∏–∑–Ω—å –Ω–µ –ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Ö, –∫—Ç–æ...</div>
                    <select class="match-select" data-quote="q2"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...</option></select>
                </div>
                <div class="quote-item">
                    <div class="quote-start">–ú—ã –∂–∏–≤—ë–º, –∫–∞–∫ –±—É–¥—Ç–æ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ –∑–Ω–∞–µ–º... –ê –≤–µ–¥—å –º—ã --...</div>
                    <select class="match-select" data-quote="q3"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...</option></select>
                </div>
                 <div class="quote-item">
                    <div class="quote-start">–í—Å—ë —É –≤–∞—Å, –º–æ–ª–æ–¥—ã—Ö, –ª–µ–≥–∫–æ –∏ –ø—Ä–æ—Å—Ç–æ‚Ä¶ –ê –∂–∏–∑–Ω—å-—Ç–æ...</div>
                    <select class="match-select" data-quote="q4"><option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ...</option></select>
                </div>
             </div>
             <div class="feedback"></div>
        </div>
        
        <div class="quiz-step" data-question="9" data-type="text" data-answer="–¶–∏–Ω–∏–∫–∏" 
             data-explanation="–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –≠—Ç–æ —Ñ–∏–ª—å–º ¬´–¶–∏–Ω–∏–∫–∏¬ª 1991 –≥–æ–¥–∞, —Å–Ω—è—Ç—ã–π –ø–æ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω–æ–º—É —Ä–æ–º–∞–Ω—É –ê–Ω–∞—Ç–æ–ª–∏—è –ú–∞—Ä–∏–µ–Ω–≥–æ—Ñ–∞."
             data-explanation-wrong="–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –†–µ–±—É—Å –∑–∞–≥–∞–¥—ã–≤–∞–ª —Ñ–∏–ª—å–º ¬´–¶–∏–Ω–∏–∫–∏¬ª (1991 –≥.).">
             <div class="question-title">–ù–∞ –ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–æ–º –º–æ—Å—Ç—É, –ø–æ–º–∏–º–æ "–®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞", —Å–Ω–∏–º–∞–ª–∏ —ç–ø–∏–∑–æ–¥ –µ—â—ë –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –≤ 1991 –≥–æ–¥—É. –û—Ç–≥–∞–¥–∞–π—Ç–µ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–±—É—Å—É.</div>
             <div class="image-rebus">
                 <img src="img/rebus.webp" alt="–†–µ–±—É—Å" loading="lazy" decoding="async" width="300" height="200" onerror="this.onerror=null;this.src='https://placehold.co/300x200/eee/333?text=–†–µ–±—É—Å';">
             </div>
             <input type="text" class="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
             <div class="feedback"></div>
        </div>
        
        <div class="quiz-step" data-question="10" data-type="image" data-answer="karik_vali_correct.webp" 
             data-explanation="–ò–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –∫–∞–¥—Ä –∏–∑ —Ñ–∏–ª—å–º–∞ ¬´–ù–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –ö–∞—Ä–∏–∫–∞ –∏ –í–∞–ª–∏¬ª!"
             data-explanation-wrong="–ù–µ —ç—Ç–æ—Ç –∫–∞–¥—Ä. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–¥—Å–≤–µ—á–µ–Ω –∑–µ–ª–µ–Ω—ã–º. –≠—Ç–æ –∫–∞–¥—Ä –∏–∑ ¬´–ù–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π –ö–∞—Ä–∏–∫–∞ –∏ –í–∞–ª–∏¬ª.">
            <div class="question-title">–ù–∞ –∫–∞–∫–æ–º –∫–∞–¥—Ä–µ –∏–∑–æ–±—Ä–∞–∂—ë–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ñ–∏–ª—å–º–∞ ¬´–ù–µ–æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –ö–∞—Ä–∏–∫–∞ –∏ –í–∞–ª–∏¬ª?</div>
            <div class="image-options">
                <img src="img/karik_vali_correct.webp" alt="–ö–∞–¥—Ä 1" data-value="karik_vali_correct.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ö–∞–¥—Ä+1';">
                <img src="img/frame_wrong_1.webp" alt="–ö–∞–¥—Ä 2" data-value="frame_wrong_1.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ö–∞–¥—Ä+2';">
                <img src="img/frame_wrong_2.webp" alt="–ö–∞–¥—Ä 3" data-value="frame_wrong_2.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ö–∞–¥—Ä+3';">
                <img src="img/frame_wrong_3.webp" alt="–ö–∞–¥—Ä 4" data-value="frame_wrong_3.webp" loading="lazy" decoding="async" width="150" height="150" onerror="this.onerror=null;this.src='https://placehold.co/150x150/ccc/fff?text=–ö–∞–¥—Ä+4';">
            </div>
            <div class="feedback"></div>
        </div>

        <div class="quiz-step" data-question="11" data-type="radio" data-answer="–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞ –∏ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞: –°–æ–∫—Ä–æ–≤–∏—â–∞ –ê–≥—Ä—ã" 
             data-explanation="–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –≤–µ—Ä–Ω–æ! –í —Ñ–∏–ª—å–º–µ ¬´–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞ –∏ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞: –°–æ–∫—Ä–æ–≤–∏—â–∞ –ê–≥—Ä—ã¬ª –ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–∏–π –º–æ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–∞–ª –¢–∞—É—ç—Ä—Å–∫–∏–π –º–æ—Å—Ç –≤ –õ–æ–Ω–¥–æ–Ω–µ."
             data-explanation-wrong="–ù–µ–≤–µ—Ä–Ω–æ. –†–æ–ª—å –¢–∞—É—ç—Ä—Å–∫–æ–≥–æ –º–æ—Å—Ç–∞ –≤ –õ–æ–Ω–¥–æ–Ω–µ ¬´—Å—ã–≥—Ä–∞–ª¬ª –ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–∏–π –º–æ—Å—Ç –≤ —Ñ–∏–ª—å–º–µ ¬´–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞ –∏ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞: –°–æ–∫—Ä–æ–≤–∏—â–∞ –ê–≥—Ä—ã¬ª.">
             <div class="question-title">–í –∫–∞–∫–æ–º –∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å–æ–≤–µ—Ç—Å–∫–æ–º —Ñ–∏–ª—å–º–µ –ë–æ–ª—å—à–µ–æ—Ö—Ç–∏–Ω—Å–∫–∏–π –º–æ—Å—Ç ¬´—Å—ã–≥—Ä–∞–ª —Ä–æ–ª—å¬ª –¢–∞—É—ç—Ä—Å–∫–æ–≥–æ –º–æ—Å—Ç–∞ –≤ –õ–æ–Ω–¥–æ–Ω–µ?</div>
             <div class="answers">
                 <div class="answer"><input type="radio" name="q11" id="q11a1" value="–°—Ç–∞—Ä–∏–∫ –•–æ—Ç—Ç–∞–±—ã—á"><label for="q11a1">¬´–°—Ç–∞—Ä–∏–∫ –•–æ—Ç—Ç–∞–±—ã—á¬ª</label></div>
                 <div class="answer"><input type="radio" name="q11" id="q11a2" value="–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞ –∏ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞: –°–æ–∫—Ä–æ–≤–∏—â–∞ –ê–≥—Ä—ã"><label for="q11a2">¬´–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –®–µ—Ä–ª–æ–∫–∞ –•–æ–ª–º—Å–∞ –∏ –¥–æ–∫—Ç–æ—Ä–∞ –í–∞—Ç—Å–æ–Ω–∞: –°–æ–∫—Ä–æ–≤–∏—â–∞ –ê–≥—Ä—ã¬ª</label></div>
                 <div class="answer"><input type="radio" name="q11" id="q11a3" value="–ó–æ–ª–æ—Ç–æ–π —Ç–µ–ª—ë–Ω–æ–∫"><label for="q11a3">¬´–ó–æ–ª–æ—Ç–æ–π —Ç–µ–ª—ë–Ω–æ–∫¬ª</label></div>
                 <div class="answer"><input type="radio" name="q11" id="q11a4" value="–ì–∞—Ä–¥–µ–º–∞—Ä–∏–Ω—ã, –≤–ø–µ—Ä—ë–¥!"><label for="q11a4">¬´–ì–∞—Ä–¥–µ–º–∞—Ä–∏–Ω—ã, –≤–ø–µ—Ä—ë–¥!¬ª</label></div>
             </div>
             <div class="feedback"></div>
        </div>
    </div>

    <div id="results" class="quiz-step">
        <img id="result-image" src="" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞" loading="lazy" decoding="async" width="800" height="450" sizes="(max-width: 768px) 100vw, (max-width: 1024px) 90vw, 800px">
        <h2>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</h2>
        <div id="score-display"></div>
        <h3 id="result-title"></h3>
        <p id="result-description"></p>
        
        <!-- –ë–ª–æ–∫ —Å –Ω–æ–º–µ—Ä–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞ -->
        <div id="lottery-number-container" class="lottery-number-container">
            <h3>–ù–æ–º–µ—Ä –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ</h3>
            <div class="lottery-number-display">
                <span id="lottery-number">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                <button id="copy-number-btn" class="copy-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                </button>
            </div>
            <p class="lottery-number-info">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç –Ω–æ–º–µ—Ä –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –ø—Ä–∏–∑–æ–≤!</p>
            <div class="lottery-instructions">
                <p><strong>–î–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –≤ –≤–∏–¥–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø–æ–¥ –ø–æ—Å—Ç–æ–º –æ —Ä–æ–∑—ã–≥—Ä—ã—à–µ –≤ –Ω–∞—à–µ–π –≥—Ä—É–ø–ø–µ –í–ö:</strong></p>
                <p><a href="https://vk.com/wall-17047312_15249" target="_blank" class="vk-link">https://vk.com/wall-17047312_15247</a></p>
                <p>–¢–∞–º —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ —Å–∞–º–æ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ!</p>
            </div>
        </div>
        
        <div class="results-actions">
            <a href="https://krasnakarta.ru/excursions/detail/po-sledam-lenfilma/" target="_blank" class="action-btn">–ü–æ —Å–ª–µ–¥–∞–º –õ–µ–Ω—Ñ–∏–ª—å–º–∞</a>
            <button id="restart-quiz-btn" class="action-btn" style="background-color: var(--secondary-color);">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
        </div>
    </div>

    <div class="quiz-navigation">
        <button id="prev-btn" class="nav-btn" style="background-color: var(--secondary-color);">–ù–∞–∑–∞–¥</button>
        <button id="nav-btn" class="nav-btn" disabled>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>
</div>

<!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–æ–º–µ—Ä–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
<div id="admin-panel" class="admin-panel" style="display: none;">
    <div class="admin-content">
        <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –ù–æ–º–µ—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä–æ–∑—ã–≥—Ä—ã—à–∞</h2>
                <div class="admin-controls">
                    <button id="load-numbers-btn" class="action-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–º–µ—Ä–∞</button>
                    <button id="export-csv-btn" class="action-btn" style="background-color: var(--correct-color);">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                    <button id="export-json-btn" class="action-btn" style="background-color: var(--secondary-color);">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
                    <button id="draw-winner-btn" class="action-btn" style="background-color: #ff6b35;">–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–æ–∑—ã–≥—Ä—ã—à</button>
                    <button id="close-admin-btn" class="action-btn" style="background-color: #6c757d;">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
        
        <div class="stats-info">
            <p>–í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: <span id="total-participants">0</span></p>
            <p>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤: <span id="unique-numbers">0</span></p>
        </div>
        
        <div class="numbers-list-container">
            <h3>–°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</h3>
            <div id="numbers-list" class="numbers-list"></div>
        </div>
        
        <div id="winner-display" class="winner-display" style="display: none;">
            <h3>üéâ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —Ä–æ–∑—ã–≥—Ä—ã—à–∞:</h3>
            <div class="winner-number"></div>
        </div>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (—Å–∫—Ä—ã—Ç–∞—è, –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å) -->
<button id="admin-toggle-btn" class="admin-toggle-btn" style="display: none;">–ê–¥–º–∏–Ω</button>

<!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º) -->
<script src="config.js"></script>
<script src="config.github.js"></script>
<script>
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    console.log('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', !!window.ADMIN_CONFIG);
    if (!window.ADMIN_CONFIG) {
        console.log('–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
        // Fallback –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        window.ADMIN_CONFIG = {
            maxLoginAttempts: 3,
            sessionTimeout: 30 * 60 * 1000
        };
    }
</script>

<!-- Firebase SDK -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
    import { getFirestore, doc, runTransaction, setDoc, getDoc, collection, addDoc, serverTimestamp, getDocs, query, orderBy, deleteDoc } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore.js";
    import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCcam04I594Zl-t83DGNH4eIcTBynJZweQ",
        authDomain: "my-quiz-app-7e68f.firebaseapp.com",
        projectId: "my-quiz-app-7e68f",
        storageBucket: "my-quiz-app-7e68f.appspot.com",
        messagingSenderId: "1037037283720",
        appId: "1:1037037283720:web:1f5b05864587f3820e723d"
    };

    let db;
    let auth;
    const LOCAL_STORAGE_UID_KEY = 'quiz_uid';
    
    console.log('–ü—Ä–æ–≤–µ—Ä—è–µ–º firebaseConfig:', firebaseConfig);
    
    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);
        console.log('Firebase —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:', { db, auth });
    } catch (e) {
        console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Firebase. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–≤–∏–ª–∏ –æ–±—ä–µ–∫—Ç firebaseConfig.", e);
        console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:", e.message);
    }
    
    const welcomeScreen = document.getElementById('welcome-screen');
    const startQuizBtn = document.getElementById('start-quiz-btn');
    const quizContainer = document.getElementById('quiz-container');
    const quizHeader = document.querySelector('.quiz-header');
    const quizBody = document.getElementById('quiz-body');
    const steps = Array.from(quizBody.querySelectorAll('.quiz-step'));
    const navBtn = document.getElementById('nav-btn');
    const prevBtn = document.getElementById('prev-btn');
    const navigationContainer = document.querySelector('.quiz-navigation');
    const resultsContainer = document.getElementById('results');
    const restartBtn = document.getElementById('restart-quiz-btn');
    const resultImage = document.getElementById('result-image');
    const progressCurrent = document.getElementById('progress-current');
    const progressTotal = document.getElementById('progress-total');
    
    let currentStep = 0;
    let viewState = 'question';
    const userAnswers = {};
    let uniqueUserId = null; // fallback –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ uid
    let authUserId = null;   // uid –∏–∑ Firebase Auth
    let lotteryNumber = null; // –Ω–æ–º–µ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–∞
    let allParticipants = []; // –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
    function updateProgress() {
        if (progressCurrent) progressCurrent.textContent = String(currentStep + 1);
        if (progressTotal) progressTotal.textContent = String(steps.length);
        if (prevBtn) prevBtn.disabled = currentStep === 0;
    }

    // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–∫–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç)
    function generateLotteryNumber() {
        const timestamp = Date.now().toString(36).slice(-4).toUpperCase();
        const randomPart = Math.random().toString(36).substring(2, 6).toUpperCase();
        return `${timestamp}${randomPart}`;
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
    // –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ß–ï–†–ï–ó GITHUB PAGES
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏)
    window.debugAdmin = function() {
        console.log('=== –û–¢–õ–ê–î–ö–ê –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–ò ===');
        console.log('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', !!window.ADMIN_CONFIG);
        console.log('GitHub Pages:', window.location.hostname.includes('github.io'));
        console.log('–¢–æ–∫–µ–Ω –≤ localStorage:', !!localStorage.getItem('github_token'));
        console.log('============================');
    };
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GitHub
    async function checkGitHubAuth() {
        try {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω GitHub –≤ localStorage
            const githubToken = localStorage.getItem('github_token');
            if (!githubToken) {
                return false;
            }
            
            // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –∏ –º—ã –Ω–∞ GitHub Pages
            const isOnGitHub = window.location.hostname.includes('github.io') || 
                              window.location.hostname.includes('github.com');
            
            if (isOnGitHub && githubToken === 'github_pages_user') {
                console.log('GitHub Pages –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');
                return true;
            }
            
            // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, —É–¥–∞–ª—è–µ–º –µ–≥–æ
            localStorage.removeItem('github_token');
            return false;
        } catch (error) {
            console.log('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
            return false;
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GitHub (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
    window.githubAuth = function() {
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ GitHub
        const isOnGitHub = window.location.hostname.includes('github.io') || 
                          window.location.hostname.includes('github.com');
        
        if (isOnGitHub) {
            // –ï—Å–ª–∏ –º—ã –Ω–∞ GitHub Pages, —Å—á–∏—Ç–∞–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            localStorage.setItem('github_token', 'github_pages_user');
            alert('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub —É—Å–ø–µ—à–Ω–∞!\n\n–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.');
            window.showAdminPanel();
        } else {
            // –ï—Å–ª–∏ –Ω–µ –Ω–∞ GitHub, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub Pages
            const goToGitHub = confirm('–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GitHub –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ GitHub Pages –≤–µ—Ä—Å–∏—é —Å–∞–π—Ç–∞.\n\n–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub Pages?');
            if (goToGitHub) {
                // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à GitHub Pages URL
                window.open('https://your-username.github.io/movie-quiz/', '_blank');
            }
        }
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ GitHub
    window.githubLogout = function() {
        localStorage.removeItem('github_token');
        alert('–í—ã –≤—ã—à–ª–∏ –∏–∑ GitHub –∞–∫–∫–∞—É–Ω—Ç–∞');
        location.reload();
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏)
    window.checkAuthStatus = function() {
        console.log('=== –°–¢–ê–¢–£–° –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ===');
        console.log('GitHub Pages:', window.location.hostname.includes('github.io'));
        console.log('–¢–æ–∫–µ–Ω –≤ localStorage:', !!localStorage.getItem('github_token'));
        console.log('–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', localStorage.getItem('github_token') === 'github_pages_user');
        console.log('========================');
    };
    

    async function loadParticipants() {
        if (!db) {
            console.error('Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            alert('Firebase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            return;
        }

        console.log('–ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤...');
        
        try {
            const attemptsRef = collection(db, 'quizAttempts');
            console.log('–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∞:', attemptsRef);
            
            const q = query(attemptsRef, orderBy('createdAt', 'desc'));
            console.log('–ó–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω:', q);
            
            const querySnapshot = await getDocs(q);
            console.log('–î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã:', querySnapshot.size);
            
            allParticipants = [];
            querySnapshot.forEach((doc) => {
                const data = doc.data();
                console.log('–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç:', doc.id, data);
                if (data.lotteryNumber) {
                    allParticipants.push({
                        id: doc.id,
                        lotteryNumber: data.lotteryNumber,
                        score: data.score,
                        total: data.total,
                        createdAt: data.createdAt,
                        uid: data.uid
                    });
                }
            });
            
            console.log('–ù–∞–π–¥–µ–Ω–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –Ω–æ–º–µ—Ä–∞–º–∏:', allParticipants.length);
            updateParticipantsDisplay();
            console.log(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${allParticipants.length} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∞`);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:', error);
            console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error.message);
            console.error('–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:', error.stack);
            alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
        }
    }

    function updateParticipantsDisplay() {
        console.log('–û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:', allParticipants.length);
        
        const totalParticipants = document.getElementById('total-participants');
        const uniqueNumbers = document.getElementById('unique-numbers');
        const numbersList = document.getElementById('numbers-list');

        console.log('–≠–ª–µ–º–µ–Ω—Ç—ã DOM:', { totalParticipants, uniqueNumbers, numbersList });

        if (totalParticipants) {
            totalParticipants.textContent = allParticipants.length;
            console.log('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:', allParticipants.length);
        }
        
        const uniqueNumbersSet = new Set(allParticipants.map(p => p.lotteryNumber));
        if (uniqueNumbers) {
            uniqueNumbers.textContent = uniqueNumbersSet.size;
            console.log('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤:', uniqueNumbersSet.size);
        }

        if (numbersList) {
            numbersList.innerHTML = '';
            allParticipants.forEach((participant, index) => {
                const participantDiv = document.createElement('div');
                participantDiv.className = 'participant-item';
                participantDiv.innerHTML = `
                    <span class="participant-number">${participant.lotteryNumber}</span>
                    <span class="participant-score">${participant.score}/${participant.total}</span>
                    <span class="participant-date">${new Date(participant.createdAt?.seconds * 1000).toLocaleString('ru-RU')}</span>
                `;
                numbersList.appendChild(participantDiv);
            });
        }
    }

    function exportToCSV() {
        if (allParticipants.length === 0) {
            alert('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–º–µ—Ä–∞.');
            return;
        }

        const csvContent = [
            '–ù–æ–º–µ—Ä,–ë–∞–ª–ª—ã,–í—Å–µ–≥–æ,–î–∞—Ç–∞,UID',
            ...allParticipants.map(p => 
                `${p.lotteryNumber},${p.score},${p.total},"${new Date(p.createdAt?.seconds * 1000).toLocaleString('ru-RU')}",${p.uid}`
            )
        ].join('\n');

        downloadFile(csvContent, 'participants.csv', 'text/csv');
    }

    function exportToJSON() {
        if (allParticipants.length === 0) {
            alert('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–º–µ—Ä–∞.');
            return;
        }

        const jsonContent = JSON.stringify(allParticipants, null, 2);
        downloadFile(jsonContent, 'participants.json', 'application/json');
    }

    function downloadFile(content, filename, mimeType) {
        const blob = new Blob([content], { type: mimeType });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function drawWinner() {
        if (allParticipants.length === 0) {
            alert('–ù–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è —Ä–æ–∑—ã–≥—Ä—ã—à–∞. –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–º–µ—Ä–∞.');
            return;
        }

        const randomIndex = Math.floor(Math.random() * allParticipants.length);
        const winner = allParticipants[randomIndex];
        
        const winnerDisplay = document.getElementById('winner-display');
        const winnerNumber = document.querySelector('.winner-number');
        
        if (winnerDisplay && winnerNumber) {
            winnerNumber.textContent = winner.lotteryNumber;
            winnerDisplay.style.display = 'block';
            winnerDisplay.scrollIntoView({ behavior: 'smooth' });
        }
    }


    const normalizeText = (text) => {
        if (typeof text !== 'string') return '';
        return text.trim().toLowerCase().replace(/[\s.,!"¬´¬ª-]/g, '');
    };
    
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function initMetroQuestion() {
        const step = document.querySelector('[data-type="match-metro"]');
        if (!step) return;
        const selects = step.querySelectorAll('select');
        const answers = JSON.parse(step.dataset.answer);
        const cities = Object.values(answers);
        shuffleArray(cities);
        
        selects.forEach(select => {
            cities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                select.appendChild(option);
            });
        });
    }
    
    function initQuotesQuestion() {
        const step = document.querySelector('[data-type="match-quotes"]');
        if (!step) return;
        const selects = step.querySelectorAll('select');
        const answers = JSON.parse(step.dataset.answer);
        const endings = Object.values(answers);
        shuffleArray(endings);
        
        selects.forEach(select => {
            endings.forEach(ending => {
                const option = document.createElement('option');
                option.value = ending;
                option.textContent = `...${ending}.`;
                select.appendChild(option);
            });
        });
    }

    const checkAnswerProvided = () => {
        const step = steps[currentStep];
        const type = step.dataset.type;
        let isAnswered = false;

        if (type === 'radio') {
            isAnswered = !!step.querySelector('input[type="radio"]:checked');
        } else if (type === 'image') {
            isAnswered = !!step.querySelector('img.selected');
        } else if (type === 'text') {
            isAnswered = step.querySelector('input[type="text"]').value.trim() !== '';
        } else if (type === 'match-metro' || type === 'match-quotes') {
            const selects = step.querySelectorAll('select');
            isAnswered = Array.from(selects).every(s => s.value !== '');
        }
        navBtn.disabled = !isAnswered;
    };

    const handleNav = () => {
        if (viewState === 'question') {
            checkAnswer();
        } else {
            showNextQuestion();
        }
    };

    const checkAnswer = () => {
        const step = steps[currentStep];
        step.classList.add('answered');
        viewState = 'feedback';
        navBtn.disabled = false;
        
        if (currentStep < steps.length - 1) {
            navBtn.textContent = '–î–∞–ª–µ–µ';
        } else {
            navBtn.textContent = '–£–∑–Ω–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç';
        }

        const questionNumber = step.dataset.question;
        const explanation = step.dataset.explanation;
        const explanationWrong = step.dataset.explanationWrong;
        const feedbackEl = step.querySelector('.feedback');
        let isCorrect = false;

        const type = step.dataset.type;
        const correctAnswer = step.dataset.answer;

        switch (type) {
            case 'radio': {
                const selectedRadio = step.querySelector('input[type="radio"]:checked');
                isCorrect = normalizeText(selectedRadio.value) === normalizeText(correctAnswer);
                const correctLabel = step.querySelector(`input[value="${correctAnswer}"]`).parentElement;
                correctLabel.classList.add('correct');
                if (!isCorrect) {
                    selectedRadio.parentElement.classList.add('incorrect');
                }
                break;
            }
            case 'text': {
                const textInput = step.querySelector('input[type="text"]');
                isCorrect = normalizeText(textInput.value) === normalizeText(correctAnswer);
                textInput.style.borderColor = isCorrect ? 'var(--correct-color)' : 'var(--incorrect-color)';
                textInput.style.backgroundColor = isCorrect ? '#eaf6ec' : '#fbebec';
                break;
            }
            case 'image': {
                const selectedImage = step.querySelector('img.selected');
                isCorrect = normalizeText(selectedImage.dataset.value) === normalizeText(correctAnswer);
                const correctImage = step.querySelector(`img[data-value="${correctAnswer}"]`);
                correctImage.classList.add('correct');
                if (!isCorrect) {
                    selectedImage.classList.add('incorrect');
                }
                break;
            }
            case 'match-metro':
            case 'match-quotes': {
                const answers = JSON.parse(correctAnswer);
                const selects = step.querySelectorAll('select');
                let allCorrect = true;
                selects.forEach(select => {
                    const key = select.dataset.map || select.dataset.quote;
                    const isSelectCorrect = normalizeText(select.value) === normalizeText(answers[key]);
                    select.style.borderColor = isSelectCorrect ? 'var(--correct-color)' : 'var(--incorrect-color)';
                    if (!isSelectCorrect) allCorrect = false;
                });
                isCorrect = allCorrect;
                break;
            }
        }
        
        userAnswers[questionNumber] = isCorrect;
        
        if (isCorrect) {
            feedbackEl.textContent = explanation;
        } else {
            feedbackEl.textContent = explanationWrong;
        }
        feedbackEl.classList.add(isCorrect ? 'correct' : 'incorrect');
        feedbackEl.style.display = 'block';
    };

    const showNextQuestion = () => {
        if (currentStep >= steps.length - 1) {
            showResults();
            return;
        }

        steps[currentStep].classList.remove('active');
        currentStep++;
        steps[currentStep].classList.add('active');

        viewState = 'question';
        navBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å';
        checkAnswerProvided();
        updateProgress();
    };
    
    const showResults = async () => {
        quizHeader.style.display = 'none';
        quizBody.style.display = 'none';
        navigationContainer.style.display = 'none';
        resultsContainer.style.display = 'block';
        resultsContainer.classList.add('active');
        
        const score = Object.values(userAnswers).filter(Boolean).length;
        const total = Object.keys(userAnswers).length;
        const incorrect = total - score;
        
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const scoreDisplay = document.getElementById('score-display');
        
        scoreDisplay.innerHTML = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span class="correct">${score}</span> –∏–∑ ${total}. –û—à–∏–±–æ–∫: <span class="incorrect">${incorrect}</span>.`;
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–∞
        lotteryNumber = generateLotteryNumber();
        const lotteryNumberElement = document.getElementById('lottery-number');
        if (lotteryNumberElement) {
            lotteryNumberElement.textContent = lotteryNumber;
        }
        
        if (score <= 4) {
            resultTitle.textContent = "–ù–æ–≤–∏—á–æ–∫ –≤ –º–∏—Ä–µ –∫–∏–Ω–æ";
            resultDescription.textContent = "–í—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å–≤–æ–π –ø—É—Ç—å! –≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–≤–æ–¥ –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Å–µ–±—è –∫–ª–∞—Å—Å–∏–∫—É —Å–æ–≤–µ—Ç—Å–∫–æ–≥–æ –∫–∏–Ω–æ –∏ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ –∑–Ω–∞–∫–æ–º—ã–µ —É–ª–∏—Ü—ã –ø–æ–¥ –¥—Ä—É–≥–∏–º —É–≥–ª–æ–º.";
            resultImage.src = 'img/pic1.webp';
        } else if (score <= 8) {
            resultTitle.textContent = "–£–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–∏–Ω–æ–º–∞–Ω";
            resultDescription.textContent = "–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã —Ö–æ—Ä–æ—à–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ—Ç–µ—Å—å –≤ —Å–æ–≤–µ—Ç—Å–∫–æ–º –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–µ –∏ –ø–æ–º–Ω–∏—Ç–µ –∑–Ω–∞–∫–æ–≤—ã–µ —Ü–∏—Ç–∞—Ç—ã. –ï—â–µ –Ω–µ–º–Ω–æ–≥–æ, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏–∏!";
            resultImage.src = 'img/pic2.webp';
        } else {
            resultTitle.textContent = "–ù–∞—Å—Ç–æ—è—â–∏–π –∑–Ω–∞—Ç–æ–∫ –∏ –∫—Ä–∞–µ–≤–µ–¥";
            resultDescription.textContent = "–ë—Ä–∞–≤–æ! –í–∞—à–∏ –∑–Ω–∞–Ω–∏—è –ø–æ—Ä–∞–∂–∞—é—Ç. –í—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å –ª–µ–≥–∫–æ—Å—Ç—å—é –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∏–ª—å–º–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —É–∑–Ω–∞–µ—Ç —Ä–∞–π–æ–Ω—ã –≥–æ—Ä–æ–¥–∞ –ø–æ –æ–¥–Ω–æ–º—É –∫–∞–¥—Ä—É. –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!";
            resultImage.src = 'img/pic3.webp';
        }

        if (db) {
            const statsRootRef = doc(db, "quizStats", "completions");
            try {
                await runTransaction(db, async (transaction) => {
                    const counterDoc = await transaction.get(statsRootRef);
                    if (!counterDoc.exists()) {
                        transaction.set(statsRootRef, { totalCompletions: 1, count: 1, uniqueUsers: 0 });
                    } else {
                        const data = counterDoc.data() || {};
                        const previous = (data.totalCompletions ?? data.count ?? 0);
                        const newTotal = previous + 1;
                        transaction.update(statsRootRef, { totalCompletions: newTotal, count: newTotal });
                    }
                });
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞: ", e);
            }

            try {
                const attemptsRef = collection(db, 'quizAttempts');
                await addDoc(attemptsRef, {
                    uid: uniqueUserId || 'anon',
                    score,
                    total,
                    incorrect,
                    lotteryNumber: lotteryNumber,
                    createdAt: serverTimestamp(),
                    userAgent: navigator.userAgent,
                });
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ –ø–æ–ø—ã—Ç–∫–∏: ', e);
            }
        }
    };

    navBtn.addEventListener('click', handleNav);
    if (prevBtn) {
        prevBtn.addEventListener('click', () => {
            if (currentStep === 0) return;
            steps[currentStep].classList.remove('active');
            currentStep--;
            steps[currentStep].classList.add('active');
            viewState = 'question';
            navBtn.textContent = '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å';
            checkAnswerProvided();
            updateProgress();
        });
    }
    quizBody.addEventListener('click', (e) => {
        const currentStepEl = steps[currentStep];
        if (!currentStepEl || currentStepEl.classList.contains('answered')) return;

        if (e.target.tagName === 'IMG' && e.target.closest('.image-options')) {
             currentStepEl.querySelectorAll('.image-options img').forEach(i => i.classList.remove('selected'));
             e.target.classList.add('selected');
             checkAnswerProvided();
        } else if (e.target.closest('.answer')) {
            const answerDiv = e.target.closest('.answer');
            currentStepEl.querySelectorAll('.answer').forEach(a => a.classList.remove('selected'));
            answerDiv.classList.add('selected');
            answerDiv.querySelector('input[type="radio"]').checked = true;
            checkAnswerProvided();
        }
    });
    quizBody.addEventListener('input', checkAnswerProvided);
    
    startQuizBtn.addEventListener('click', () => {
        welcomeScreen.style.display = 'none';
        quizContainer.style.display = 'block';
    });
    
    restartBtn.addEventListener('click', () => {
        location.reload();
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    const copyNumberBtn = document.getElementById('copy-number-btn');
    if (copyNumberBtn) {
        copyNumberBtn.addEventListener('click', async () => {
            if (lotteryNumber) {
                try {
                    await navigator.clipboard.writeText(lotteryNumber);
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
                    const originalText = copyNumberBtn.innerHTML;
                    copyNumberBtn.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20,6 9,17 4,12"></polyline>
                        </svg>
                    `;
                    copyNumberBtn.style.backgroundColor = 'var(--correct-color)';
                    
                    setTimeout(() => {
                        copyNumberBtn.innerHTML = originalText;
                        copyNumberBtn.style.backgroundColor = '';
                    }, 2000);
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
                    // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                    const textArea = document.createElement('textarea');
                    textArea.value = lotteryNumber;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                }
            }
        });
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
    const adminPanel = document.getElementById('admin-panel');
    const adminToggleBtn = document.getElementById('admin-toggle-btn');
    const loadNumbersBtn = document.getElementById('load-numbers-btn');
    const exportCsvBtn = document.getElementById('export-csv-btn');
    const exportJsonBtn = document.getElementById('export-json-btn');
    const drawWinnerBtn = document.getElementById('draw-winner-btn');
    const closeAdminBtn = document.getElementById('close-admin-btn');
    
    console.log('–≠–ª–µ–º–µ–Ω—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:', {
        adminPanel: !!adminPanel,
        adminToggleBtn: !!adminToggleBtn,
        loadNumbersBtn: !!loadNumbersBtn,
        exportCsvBtn: !!exportCsvBtn,
        exportJsonBtn: !!exportJsonBtn,
        drawWinnerBtn: !!drawWinnerBtn,
        closeAdminBtn: !!closeAdminBtn
    });

    if (adminToggleBtn) {
        adminToggleBtn.addEventListener('click', () => {
            if (adminPanel) {
                const isHidden = adminPanel.style.display === 'none';
                adminPanel.style.display = isHidden ? 'block' : 'none';
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
                if (isHidden) {
                    loadParticipants();
                }
            }
        });
        
        // –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç –µ—ë
        adminToggleBtn.addEventListener('dblclick', () => {
            adminToggleBtn.style.display = 'none';
            if (adminPanel) {
                adminPanel.style.display = 'none';
            }
        });
    }

    if (loadNumbersBtn) {
        loadNumbersBtn.addEventListener('click', loadParticipants);
    }

    if (exportCsvBtn) {
        exportCsvBtn.addEventListener('click', exportToCSV);
    }

    if (exportJsonBtn) {
        exportJsonBtn.addEventListener('click', exportToJSON);
    }

    if (drawWinnerBtn) {
        drawWinnerBtn.addEventListener('click', drawWinner);
    }


    if (closeAdminBtn) {
        closeAdminBtn.addEventListener('click', () => {
            if (adminPanel) {
                adminPanel.style.display = 'none';
            }
        });
    }

    // –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
    let adminKeySequence = [];
    const adminSecretKey = ['a', 'd', 'm', 'i', 'n']; // –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: a-d-m-i-n
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏)
    window.showAdminPanel = async function() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        const isGitHubAuth = await checkGitHubAuth();
        
        if (!isGitHubAuth) {
            const useGitHub = confirm('üîê –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub.\n\n–ù–∞–∂–º–∏—Ç–µ OK –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GitHub');
            
            if (useGitHub) {
                window.githubAuth();
                return;
            } else {
                alert('‚ùå –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º GitHub.');
                return;
            }
        } else {
            console.log('‚úÖ GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞');
        }

        if (adminToggleBtn) {
            adminToggleBtn.style.display = 'block';
            adminToggleBtn.style.position = 'fixed';
            adminToggleBtn.style.top = '10px';
            adminToggleBtn.style.right = '10px';
            adminToggleBtn.style.zIndex = '9999';
            adminToggleBtn.style.background = '#ff6b35';
            console.log('–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            loadParticipants();
        }
    };
    
    document.addEventListener('keydown', (e) => {
        adminKeySequence.push(e.key.toLowerCase());
        if (adminKeySequence.length > adminSecretKey.length) {
            adminKeySequence.shift();
        }
        
        if (adminKeySequence.join('') === adminSecretKey.join('')) {
            // –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            console.log('–°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!');
            window.showAdminPanel();
            adminKeySequence = []; // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
        }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth callback –æ—Ç GitHub
    function handleGitHubCallback() {
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        const error = urlParams.get('error');
        
        if (error) {
            console.log('GitHub OAuth –æ—à–∏–±–∫–∞:', error);
            return;
        }
        
        if (code) {
            console.log('–ü–æ–ª—É—á–µ–Ω –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç GitHub');
            // –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω (—Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä)
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            alert('‚úÖ GitHub –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!\n\n–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.');
            
            // –û—á–∏—â–∞–µ–º URL –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    }
    
    document.addEventListener('DOMContentLoaded', async () => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º GitHub callback
        handleGitHubCallback();
        
        initMetroQuestion();
        initQuotesQuestion();
        checkAnswerProvided();
        updateProgress();

        // aria-live –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ —Ñ–∏–¥–±–µ–∫–∞
        document.querySelectorAll('.feedback').forEach(el => {
            el.setAttribute('aria-live', 'polite');
        });

        // –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è: Enter –¥–ª—è "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å/–î–∞–ª–µ–µ", —Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ ‚Äî "–ù–∞–∑–∞–¥"
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                if (!navBtn.disabled) handleNav();
            } else if (e.key === 'ArrowLeft') {
                if (prevBtn && !prevBtn.disabled) prevBtn.click();
            }
        });

        // –ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è + fallback localStorage
        try {
            if (auth) {
                onAuthStateChanged(auth, async (user) => {
                    try {
                        if (!user) {
                            await signInAnonymously(auth);
                            return; // –¥–æ–∂–¥–µ–º—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è onAuthStateChanged
                        }
                        authUserId = user.uid;
                        // —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π uid –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
                        uniqueUserId = localStorage.getItem(LOCAL_STORAGE_UID_KEY) || authUserId;
                        localStorage.setItem(LOCAL_STORAGE_UID_KEY, uniqueUserId);

                        // —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ quizUsers
                        const userRef = doc(db, 'quizUsers', authUserId);
                        const existing = await getDoc(userRef);
                        if (!existing.exists()) {
                            await setDoc(userRef, {
                                createdAt: serverTimestamp(),
                                userAgent: navigator.userAgent,
                                anon: true,
                            });
                            // –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö
                            const statsRootRef = doc(db, "quizStats", "completions");
                            await runTransaction(db, async (transaction) => {
                                const counterDoc = await transaction.get(statsRootRef);
                                if (!counterDoc.exists()) {
                                    transaction.set(statsRootRef, { totalCompletions: 0, uniqueUsers: 1 });
                                } else {
                                    const newUnique = (counterDoc.data().uniqueUsers || 0) + 1;
                                    transaction.update(statsRootRef, { uniqueUsers: newUnique });
                                }
                            });
                        }
                    } catch (err) {
                        console.error('Auth init error: ', err);
                    }
                });
            } else {
                // Fallback: –±–µ–∑ Auth –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π uid
                uniqueUserId = localStorage.getItem(LOCAL_STORAGE_UID_KEY);
                if (!uniqueUserId) {
                    uniqueUserId = `uid_${Math.random().toString(36).slice(2)}_${Date.now()}`;
                    localStorage.setItem(LOCAL_STORAGE_UID_KEY, uniqueUserId);
                }
            }
        } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ', e);
        }
    });

</script>


</body>
</html>

